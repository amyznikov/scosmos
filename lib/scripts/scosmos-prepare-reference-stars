#! /usr/bin/octave -qf

format short;
ignore_function_time_stamp("all");

arg_list = argv ();

if ( nargin != 2 )
  printf ("Usage:\n");
  printf ("  %s reference-catalog-name surveyid-or-plateid\n", program_name ());
  return;
end

refs = strsplit(arg_list{1},",; ");
platenames = strsplit(arg_list{2},",; ");

plateid=zeros(size(platenames,2),1);
for i = 1:size(plateid)
  plateid(i) = str2num(platenames{i}); 
end


for i=1:size(plateid)

  pid = plateid(i);
  
  if ( pid <= 9 )
    plate_list = ssa_plate_list(pid);
  else 
    plate_list = [ pid ];
  end
  
  for j = 1:size(plate_list)
  
    pid = plate_list(j);
    sid = ssa_surveyid(pid);
    
    printf("\n***\nPLATE %d/%d\n", sid, pid);
    prepare_reference_stars( pid, refs );
  end
  
end

